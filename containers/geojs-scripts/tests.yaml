schemaVersion: "2.0.0"

fileExistenceTests:
  - name: "Python executable"
    path: /usr/local/bin/python
    shouldExist: true
  - name: "Python3 executable"
    path: /usr/local/bin/python3
    shouldExist: true
  - name: "Requirements file copied"
    path: /requirements.txt
    shouldExist: true

commandTests:
  - name: "Python version"
    command: "python"
    args: ["--version"]
    exitCode: 0
  - name: "Check imports"
    command: "python"
    args: ["-c", "import sys; print('Python imports working')"]
    expectedOutput: ["Python imports working"]
    exitCode: 0
  - name: "Check pip installed"
    command: "python"
    args: ["-m", "pip", "--version"]
    exitCode: 0

metadataTest:
  envVars:
    - key: "PATH"
      value: ".*/usr/local/bin.*"
      isRegex: true
    - key: "PIP_NO_CACHE_DIR"
      value: "1"
  workdir: "/app"
  user: "nobody"
